<!doctype html>
<html lang="en">
<head>
    <meta
            name="generator"
            content="HTML Tidy for HTML5 for Linux version 5.8.0"
    />
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />
    <link
            href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
            rel="stylesheet"
    />
    <link href="../styles.css" rel="stylesheet"/>
    <!-- Link to your external CSS file -->
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="m-0 border-0">

<div class="container-fluid general" style="height: 500px;">
    <div class="row me-main ml-main">
        <h1 class="fs-0 text-center">Upcoming Events!</h1>
    </div>

    <div class="row">
        <div class="col-12">
            <div id="carouselExampleControls" class="carousel slide">
                <div class="carousel-inner" id="carouselInner">
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
                        data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"
                        data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Sample events data
        const eventsData = [
            {
                date: "2024-01-01",
                title: "Event 1",
                description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vitae justo eget vehicula porttitor et at nulla. Phasellus et turpis nibh. Curabitur ultricies, erat nec ullamcorper",
                img: "../Swamp-Bots-Team-logo-768x1062-removebg.png"
            },
            {
                date: "2024-02-10",
                title: "Event 2",
                description: "Description of Event 2",
                img: "../Swamp-Bots-Team-logo-768x1062-removebg.png"
            },
            {
                date: "2024-11-12",
                title: "Event 3",
                description: "Description of Event 3",
                img: "../Swamp-Bots-Team-logo-768x1062-removebg.png"
            }
        ];

        // Sort events by date in ascending order
        eventsData.sort((a, b) => new Date(a.date) - new Date(b.date));

        // Get current date and initialize carousel
        const currentDate = new Date();

        let activeEventIndex = 0;

        // Find the index of the first upcoming event or today
        eventsData.forEach((event, index) => {
            const eventDate = new Date(event.date);
            if (currentDate < eventDate) {
                activeEventIndex = index;
            }
        });

        // Populate carousel with events
        const carouselInner = document.getElementById('carouselInner');
        eventsData.forEach((event, index) => {
            const eventItem = document.createElement('div');
            eventItem.classList.add('carousel-item'); // Always add carousel-item class
            if (index === activeEventIndex) {
                eventItem.classList.add('active'); // Only add the 'active' class when needed
            }

            // Format the event date to avoid timezone issues
            const eventDate = new Date(event.date);
            const formattedDate = eventDate.toISOString().split('T')[0];  // Gets YYYY-MM-DD format

            eventItem.innerHTML = `
                <img src="${event.img}" alt="${event.title}">
                <div class="row">
                    <div class="col-4"></div>
                    <div class="col-2">
                        <div class="event-date">${formattedDate}</div>
                    </div>

                    <div class="col-2">
                        <div class="event-title">${event.title}</div>
                    </div>

                    <div class="col-4"></div>
                </div>

                <div class="row">
                    <div class="col-4"></div>
                    <div class="col-4">
                        <p class="event-description">${event.description}</p>
                    </div>
                    <div class="col-4"></div>-4"
                </div>
            `;

            carouselInner.appendChild(eventItem);
        });

        // Initialize the Bootstrap carousel without auto-sliding
        // noinspection JSUnusedLocalSymbols
        const carousel = new bootstrap.Carousel(document.getElementById('carouselExampleControls'), {
            ride: false, // Disable auto-sliding
        });
    });
</script>

</body>
</html>